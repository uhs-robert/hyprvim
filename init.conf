# hypr/.config/hypr/hyprvim/init.conf
#
#    ██╗  ██╗██╗   ██╗██████╗ ██████╗ ██╗   ██╗██╗███╗   ███╗
#    ██║  ██║╚██╗ ██╔╝██╔══██╗██╔══██╗██║   ██║██║████╗ ████║
#    ███████║ ╚████╔╝ ██████╔╝██████╔╝██║   ██║██║██╔████╔██║
#    ██╔══██║  ╚██╔╝  ██╔═══╝ ██╔══██╗╚██╗ ██╔╝██║██║╚██╔╝██║
#    ██║  ██║   ██║   ██║     ██║  ██║ ╚████╔╝ ██║██║ ╚═╝ ██║
#    ╚═╝  ╚═╝   ╚═╝   ╚═╝     ╚═╝  ╚═╝  ╚═══╝  ╚═╝╚═╝     ╚═╝
#
#
################################################################################
# HYPRVIM - VIM-STYLE KEYBINDINGS FOR HYPRLAND
################################################################################
#
# A comprehensive vim-style navigation and text editing system for Hyprland.
# Uses submaps in conjunction with keybindings and shell scripts to achieve a
# a vim-like experience globally acroos across all applications in your Wayland
# session, allowing you to navigate and edit text with familiar vim motions. Think
# of this as a "lightweight" version of vim to bridge the gaps. Also features
# Hyprland specific workflows thus: "HyprVim".
#
################################################################################

################################################################################
# DEFAULT SETTINGS
################################################################################
# Each default setting below can be customized and overriden in `./settings.conf`.
# See `./settings.conf.example` for details on how to edit.
#
# LEADER KEY
# ----------
# Leader and Activate key combo for vim mode (default: SUPER/Windows key)
# Set these to your preferred activation key combo in `settings.conf`
$LEADER = SUPER
$ACTIVATE = ESCAPE
#
# PROMPT
# ----------
# Prompt input tool for user input
# Auto-detects available tools in order: rofi, wofi, tofi, fuzzel, dmenu, zenity, kdialog
# Set to your preferred tool or leave empty string for auto-detection.
$HYPRVIM_PROMPT =
#
# NOTIFICATIONS
# ----------
# Mark notifications (1 = show notifications when jumping/setting marks, empty = disable)
$HYPRVIM_MARK_NOTIFY =
#
# ----------
# TERMINAL
# ----------
# Terminal used to display the help viewer for keybinds.
# Default uses kitty with a class that matches the floating window rule below.
# Examples:
#   $HELP_TERMINAL = ghostty --class floating-help -e
#   $HELP_TERMINAL = wezterm start --class floating-help --
#   $HELP_TERMINAL = alacritty --class floating-help -e
#   $HELP_TERMINAL = foot --app-id floating-help -e
$HELP_TERMINAL = kitty --class floating-help -e
#
# ----------
# EDITOR
# ----------
# Editor for vim-open-editor feature (nvim or vim)
# Default is nvim, set to 'vim' if you prefer classic vim
$HYPRVIM_EDITOR = nvim
#
# ----------
# DEBUG
# ----------
# Debug mode for scripts that support it (1 = enable debug logging)
$HYPRVIM_DEBUG =
#
################################################################################

# ----------------------------------------------------------------------------- #
# !-- DEPENDENCIES
# ----------------------------------------------------------------------------- #

# Shell scripts
$MOTION = ~/.config/hypr/hyprvim/scripts/vim-motion.sh
$OPERATOR_MOTION = ~/.config/hypr/hyprvim/scripts/vim-operator-motion.sh
$LINE_MOTION = ~/.config/hypr/hyprvim/scripts/vim-line-motion.sh
$COUNT = ~/.config/hypr/hyprvim/scripts/vim-count.sh
$HELP = ~/.config/hypr/hyprvim/scripts/vim-help.sh
$MARKS = HYPRVIM_MARK_NOTIFY=$HYPRVIM_MARK_NOTIFY ~/.config/hypr/hyprvim/scripts/vim-marks.sh
$REGISTERS = HYPRVIM_DEBUG=$HYPRVIM_DEBUG ~/.config/hypr/hyprvim/scripts/vim-registers.sh
$FIND = HYPRVIM_PROMPT=$HYPRVIM_PROMPT HYPRVIM_DEBUG=$HYPRVIM_DEBUG ~/.config/hypr/hyprvim/scripts/vim-find.sh
$REPLACE = HYPRVIM_PROMPT=$HYPRVIM_PROMPT ~/.config/hypr/hyprvim/scripts/vim-replace.sh
$REPLACE_CHAR = ~/.config/hypr/hyprvim/scripts/vim-replace-char.sh
$OPEN_VIM = HYPRVIM_EDITOR=$HYPRVIM_EDITOR HYPRVIM_PROMPT=$HYPRVIM_PROMPT ~/.config/hypr/hyprvim/scripts/vim-open-editor.sh

# Initialize register state directory
exec-once = mkdir -p ${XDG_RUNTIME_DIR:-/tmp}/hyprvim/registers

# ----------------------------------------------------------------------------- #
# !-- WINDOW RULES
# ----------------------------------------------------------------------------- #

# Floating help (match the class/app-id set by $HELP_TERMINAL)
windowrule {
  name = hyprvim-help-viewer
  float = on
  size = (monitor_w*0.8) (monitor_h*0.8)
  center = on
  match:class = ^(floating-help)$
}

# Find prompt (hyprvim-find class/app-id)
windowrule {
  name = hyprvim-find-prompt
  float = on
  size = 600 80
  move = (monitor_w/2-300) (monitor_h*0.1)
  match:class = ^(hyprvim-find)$
}

# Open vim anywhere (hyprvim-open-vim class/app-id)
windowrule {
  name = hyprvim-open-vim
  float = on
  size = (monitor_w*0.6) (monitor_h*0.6)
  center = on
  match:class = ^(hyprvim-open-vim)$
}

# ----------------------------------------------------------------------------- #
# !-- SOURCE CONFIGURATION
# ----------------------------------------------------------------------------- #

# User Config
# hyprlang noerror true
source = ~/.config/hypr/hyprvim/settings.conf
# hyprlang noerror false

# Vim Submaps
source = ~/.config/hypr/hyprvim/vim-modes.conf
source = ~/.config/hypr/hyprvim/vim-operators.conf
source = ~/.config/hypr/hyprvim/vim-marks.conf
source = ~/.config/hypr/hyprvim/vim-registers.conf

# ----------------------------------------------------------------------------- #
# !-- HYPRVIM ACTIVATION / EXIT KEYBINDS
# ----------------------------------------------------------------------------- #

# HyprVim Activation Keybind
bind = $LEADER, $ACTIVATE, submap, NORMAL

# Emergency exit from any vim submap - this is available globally
bindu = ALT, ESCAPE, exec, hyprctl dispatch submap reset
