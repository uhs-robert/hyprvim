# hypr/.config/hypr/hyprvim/init.conf
#
#    ██╗  ██╗██╗   ██╗██████╗ ██████╗ ██╗   ██╗██╗███╗   ███╗
#    ██║  ██║╚██╗ ██╔╝██╔══██╗██╔══██╗██║   ██║██║████╗ ████║
#    ███████║ ╚████╔╝ ██████╔╝██████╔╝██║   ██║██║██╔████╔██║
#    ██╔══██║  ╚██╔╝  ██╔═══╝ ██╔══██╗╚██╗ ██╔╝██║██║╚██╔╝██║
#    ██║  ██║   ██║   ██║     ██║  ██║ ╚████╔╝ ██║██║ ╚═╝ ██║
#    ╚═╝  ╚═╝   ╚═╝   ╚═╝     ╚═╝  ╚═╝  ╚═══╝  ╚═╝╚═╝     ╚═╝
#
#
################################################################################
# HYPRVIM - VIM-STYLE KEYBINDINGS FOR HYPRLAND
################################################################################
#
# A comprehensive vim-style navigation system for Hyprland using submaps.
# This provides vim-like keybindings across all applications in your Wayland
# session, allowing you to navigate text with familiar vim motions. Think of
# this as a "lightweight" version of vim for basic global text editing. Also
# features Hyprland specific workflows for a more vim-like experience.
#
################################################################################
# CONFIGURATION
################################################################################

# Leader key for vim mode activation (default: SUPER/Windows key)
# Change this to your preferred modifier key if needed.
# Common options: SUPER, ALT, CTRL
#
# NOTE: If you already define $LEADER elsewhere in your Hyprland config,
# you can comment out this line to use your existing definition.
$LEADER = SUPER

################################################################################
# STRUCTURE:
# ----------
# This configuration is split into modular components for maintainability:
#
#   1. vim-modes.conf     - Core vim modes (NORMAL, VISUAL, V-LINE, G-MOTION)
#   2. vim-operators.conf - Operator-pending modes (d, c, y with text objects)
#   3. vim-marks.conf     - Mark operations (set, jump, delete marks)
#
# ACTIVATION:
# -----------
# - Enter vim mode: $LEADER + ESCAPE (typically SUPER + ESCAPE)
# - Emergency exit: ALT + ESCAPE (returns to global bindings)
#
# EXIT STRATEGY:
# --------------
# - ESCAPE: Return to parent mode (e.g., VISUAL -> NORMAL)
# - $LEADER + ESCAPE: Toggle vim mode on/off from any vim submap
# - ALT + ESCAPE: Panic reset to global bindings (emergency exit)
#
# USAGE:
# ------
# In your main hyprland.conf, add:
#   source = ~/.config/hypr/hyprvim/init.conf
#
# And set a keybinding to enter NORMAL mode, e.g.:
#   bind = $LEADER, ESCAPE, submap, NORMAL
#
# FEATURES:
# ---------
# - Character/word/line/page navigation (hjkl, w/b/e, gg/G, etc.)
# - Visual selection modes (v, V for line-wise)
# - Operators with motions (d, c, y + motion)
# - Text objects (iw, aw for inner/around word)
# - Mark system (m to set, ` to jump, ' for line jump, dm to delete)
# - Register system (" prefix: "ayy, "ap, "0p for yank register, "_ for black hole)
# - Numeric repeats (e.g., 2dw, 3j, 5w) with multi-digit support (up to 999)
# - Undo/redo (u, Ctrl+r)
# - Find (/, f, F, t, T with n/N for next/previous)
# - Insert mode entry (i, a, o, O, A, I)
# - Paste (p, P)
#
# KNOWN LIMITATIONS:
# ------------------
# - No macros
# - No visual block mode (Ctrl+v)
# - Limited text object support (primarily word objects)
# - No text transformation (depends on application)
# - Character find (f/F/t/T) mapped to application find dialog
# - Application shortcuts may vary (works best with standard shortcuts)
# - Registers are not persistent across reboots (stored in tmpfs)
#
# SCRIPT DEPENDENCIES:
# --------------------
$MOTION = ~/.config/hypr/hyprvim/scripts/vim-motion.sh
$OPERATOR_MOTION = ~/.config/hypr/hyprvim/scripts/vim-operator-motion.sh
$LINE_MOTION = ~/.config/hypr/hyprvim/scripts/vim-line-motion.sh
$COUNT = ~/.config/hypr/hyprvim/scripts/vim-count.sh
$HELP = ~/.config/hypr/hyprvim/scripts/vim-help.sh
$MARKS = HYPRVIM_MARK_NOTIFY=$HYPRVIM_MARK_NOTIFY ~/.config/hypr/hyprvim/scripts/vim-marks.sh
$REGISTERS = HYPRVIM_DEBUG=$HYPRVIM_DEBUG ~/.config/hypr/hyprvim/scripts/vim-registers.sh
$FIND = HYPRVIM_PROMPT=$HYPRVIM_PROMPT HYPRVIM_DEBUG=$HYPRVIM_DEBUG ~/.config/hypr/hyprvim/scripts/vim-find.sh
$REPLACE = HYPRVIM_PROMPT=$HYPRVIM_PROMPT ~/.config/hypr/hyprvim/scripts/vim-replace.sh
$REPLACE_CHAR = ~/.config/hypr/hyprvim/scripts/vim-replace-char.sh
#
################################################################################

# Prompt input tool for user input (override in vim-user.conf or via HYPRVIM_PROMPT env var)
# Auto-detects available tools in order: rofi, wofi, tofi, fuzzel, dmenu, zenity, kdialog
# Set to empty string to use auto-detection, or specify your preferred tool.
# Examples:
#   $HYPRVIM_PROMPT = rofi
#   $HYPRVIM_PROMPT = wofi
#   $HYPRVIM_PROMPT = tofi
$HYPRVIM_PROMPT =

# Debug mode for scripts that support it (1 = enable debug logging)
$HYPRVIM_DEBUG =

# Mark notifications (1 = show notifications when jumping/setting marks, empty = disable)
$HYPRVIM_MARK_NOTIFY = 1

# Help viewer terminal (override in vim-user.conf)
# Default uses kitty with a class that matches the floating window rule below.
# Examples:
#   $HELP_TERMINAL = ghostty --class floating-help -e
#   $HELP_TERMINAL = wezterm start --class floating-help --
#   $HELP_TERMINAL = alacritty --class floating-help -e
#   $HELP_TERMINAL = foot --app-id floating-help -e
$HELP_TERMINAL = kitty --class floating-help -e

# Initialize register state directory
exec-once = mkdir -p ${XDG_RUNTIME_DIR:-/tmp}/hyprvim/registers

# Emergency exit from any vim submap - this is available globally
bindu = ALT, ESCAPE, exec, hyprctl dispatch submap reset

# Window rules for floating help (match the class/app-id set by $HELP_TERMINAL)
windowrule {
  name = hyprvim-help-viewer
  float = on
  size = (monitor_w*0.8) (monitor_h*0.8)
  center = on
  match:class = ^(floating-help)$
}

# Window rules for find prompt (hyprvim-find class/app-id)
windowrule {
  name = hyprvim-find-prompt
  float = on
  size = 600 80
  move = (monitor_w/2-300) (monitor_h*0.1)
  match:class = ^(hyprvim-find)$
}

# Source modular configuration files
source = ~/.config/hypr/hyprvim/vim-modes.conf
source = ~/.config/hypr/hyprvim/vim-operators.conf
source = ~/.config/hypr/hyprvim/vim-marks.conf
source = ~/.config/hypr/hyprvim/vim-registers.conf

# Optional: User customizations (uncomment after creating vim-user.conf)
# Copy vim-user.conf.example to vim-user.conf, then uncomment the line below:
source = ~/.config/hypr/hyprvim/vim-user.conf

################################################################################
# ACTIVATION BINDING
################################################################################
#
# NOTE: Uncomment and customize this binding to enter NORMAL mode:
# bind = $LEADER, ESCAPE, submap, NORMAL
#
# Or add this to your main hyprland.conf keybindings section.
#
################################################################################
